import{d as e,a as n,b as t,e as s,t as a,m as o,c as l,x as i,j as r}from"./vendor.6d312b35.js";import{p as c,t as u,s as h}from"./index.756f8f70.js";const p=e({name:"Profile",componentName:"ManageMobileProfile",props:{userInfo:{type:Object,default:()=>({})},modelValue:Boolean},setup:()=>({showPreview:n(!1)}),render(){return t("header",{onClick:e=>{e.stopPropagation(),this.$emit("update:modelValue",!0)}},[t(s("van-image-preview"),a({images:[this.userInfo.avatar],show:this.showPreview,showIndex:!1},{"onUpdate:show":e=>this.showPreview=e}),null),t(s("van-image"),{width:80,fit:"cover",height:80,src:this.userInfo.avatar,radius:19,style:"border: solid 1px #d9d9d9",onClick:e=>{e.stopPropagation(),this.showPreview=!0}},{loading:()=>t(s("van-loading"),{type:"spinner",size:"20"},null),error:()=>t("span",null,[o("加载失败")])}),t("div",{class:"desc"},[t("p",null,[t("b",null,[this.userInfo.username])]),t("p",null,[o("邮箱："),this.userInfo.email])]),t(s("van-icon"),{name:"arrow"},null)])}}),d=e({name:"userDetail",componentName:"ManageUserDetail",props:{userInfo:{type:Object,default:()=>({})},modelValue:{type:Boolean,default:!1}},setup:(e,{emit:n})=>({back:l({get:()=>e.modelValue,set(e){n("update:modelValue",e)}})}),render(){return t("section",{class:"user-page-detail"},[t(s("van-cell"),{center:!0,title:"头像","is-link":!0},{default:()=>t(s("van-image"),{width:70,fit:"cover",height:70,src:this.userInfo.avatar,radius:19,style:"border: solid 1px #d9d9d9"},{loading:()=>t(s("van-loading"),{type:"spinner",size:"20"},null),error:()=>t("span",null,[o("加载失败")])})}),t(s("van-cell"),{center:!0,title:"名字",value:this.userInfo.username,"is-link":!0},null),t(s("van-cell"),{center:!0,title:"个性签名",value:this.userInfo.signature,"is-link":!0},null),t(s("van-cell"),{center:!0,title:"邮箱",value:this.userInfo.email,"is-link":!0},null),t(s("van-cell"),{center:!0,title:"创建日期",value:c(this.userInfo.createDate)},null),t(s("van-cell"),{center:!0,title:"修改日期",value:c(this.userInfo.updateDate)},null),t(s("van-button"),{plain:!0,hairline:!0,block:!0,round:!0,type:"primary",style:{margin:"40px 16px 0",width:"calc(100% - 32px)"},onClick:()=>this.back=!1},{default:()=>[o("返回")]})])}});const m=e({name:"UserPageView",componentName:"ManageMobileUser",components:{profile:p,UserDetail:d},setup(){const{proxy:e}=r(),t=n(!1),s=n(!1),a=n(""),o=e.$store,i=l((()=>o.state.user.userInfo)),c=n([]);return{showShare:t,options:[[{name:"微信",icon:"wechat"},{name:"朋友圈",icon:"wechat-moments"},{name:"微博",icon:"weibo"},{name:"QQ",icon:"qq"}],[{name:"复制链接",icon:"link"},{name:"分享海报",icon:"poster"},{name:"二维码",icon:"qrcode"},{name:"小程序码",icon:"weapp-qrcode"}]],userInfo:i,showUserInfo:n(!1),showAction:s,actions:c,flag:a,touchToShowAction:(e,n,t)=>{e.stopPropagation(),c.value=n,a.value=t,s.value=!0},ActionSelect:(n,t)=>{switch(a.value){case"lang":o.dispatch("setLanguage",n.action).then((()=>{h(u("user-page")),e.$toast(u("change-language-success"))}))}}}},render(){return t("main",null,[t("section",{class:"user-page",style:{display:this.showUserInfo?"none":"block"}},[t(p,{userInfo:this.userInfo,modelValue:this.showUserInfo,"onUpdate:modelValue":e=>this.showUserInfo=e},null),t(s("van-cell"),{center:!0,title:"多语言","is-link":!0,onClick:e=>this.touchToShowAction(e,[{name:u("zh-cn"),action:"zh-cn"},{name:u("en"),action:"en"}],"lang")},null),t(s("van-cell"),{center:!0,title:"主题色","is-link":!0},null),t(s("van-cell"),{center:!0,title:"分享",onClick:()=>this.showShare=!0,"is-link":!0},null),t(s("van-cell"),{center:!0,title:"建议与反馈","is-link":!0},null),t(s("van-cell"),{center:!0,title:"退出登录","is-link":!0,to:"/login"},null),t(s("van-share-sheet"),a({show:this.showShare,title:"立即分享给好友",options:this.options},{"onUpdate:show":e=>this.showShare=e}),null),t(s("van-action-sheet"),a({show:this.showAction,actions:this.actions,"cancel-text":"返回","close-on-popstate":!0,"close-on-click-action":!0},{onSelect:this.ActionSelect,"onUpdate:show":e=>this.showAction=e}),null)]),t(i,{"enter-active-class":"animated fadeIn"},{default:()=>[this.showUserInfo&&t(s("user-detail"),{userInfo:this.userInfo,modelValue:this.showUserInfo,"onUpdate:modelValue":e=>this.showUserInfo=e},null)]})])}});export default m;
