import{t as e,u as s,i as n,N as a,_ as l,s as i}from"./index.8c612d57.js";import{d as o,c as t,b as u,l as r,e as c,k as g,i as p,a as d,r as h,w as m,m as b,j as f}from"./vendor.22894c0c.js";const v=o({name:"PCLogin",componentName:"ManagePCLogin",props:{tab:String,userObj:{type:Object,default:()=>({})},logining:{type:Boolean,default:!1}},setup:(e,{emit:s})=>({language:t({get:()=>e.tab,set(e){s("update:tab",e)}}),user:t({get:()=>e.userObj,set(e){s("update:userObj",e)}}),keyupToLogin:e=>{e.preventDefault(),e.stopPropagation(),e.code.toLowerCase().includes("enter")&&s("login")}}),render(){let s;return u("section",{class:"manage-pc-login"},[u("header",{class:"login-header"},[u("img",{src:"/assets/logo.png"},null),u("span",null,[r("vite-backen-admin")])]),u("div",{class:"login-form"},[u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("div",{class:"row"},[u(c("el-tabs"),{modelValue:this.language,"onUpdate:modelValue":e=>this.language=e,onTabClick:()=>this.$emit("tabClick")},{default:()=>[u(c("el-tab-pane"),{label:e("zh-cn"),name:"zh-cn"},null),u(c("el-tab-pane"),{label:e("en"),name:"en"},null)]})]),u("div",{class:"row"},[u(c("el-input"),{"prefix-icon":"el-icon-s-custom",modelValue:this.user.username,"onUpdate:modelValue":e=>this.user.username=e,onKeyup:this.keyupToLogin,placeholder:e("please.input.something")+e("username")},null)]),u("div",{class:"row"},[u(c("el-input"),{"prefix-icon":"el-icon-lock",modelValue:this.user.passwords,"onUpdate:modelValue":e=>this.user.passwords=e,placeholder:e("please.input.something")+e("password"),onKeyup:this.keyupToLogin,"show-password":!0},null)]),u("div",{class:"row"},[u(c("el-input"),{"prefix-icon":"el-icon-picture-outline-round",modelValue:this.user.verify,"onUpdate:modelValue":e=>this.user.verify=e,onKeyup:this.keyupToLogin,placeholder:e("please.input.something")+e("verify")},null)]),u("div",{class:"row"},[u(c("el-button"),{loading:this.logining,onClick:()=>this.$emit("login")},(n=s=e("login"),"function"==typeof n||"[object Object]"===Object.prototype.toString.call(n)&&!g(n)?s:{default:()=>[s]}))])])]);var n}});function y(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!g(e)}const w=o({name:"mobileLogin",componentName:"ManageMobileLogin",props:{tab:String,userObj:{type:Object,default:()=>({})},logining:{type:Boolean,default:!1}},setup:(e,{emit:s})=>({language:t({get:()=>e.tab,set(e){s("update:tab",e)}}),user:t({get:()=>e.userObj,set(e){s("update:userObj",e)}})}),render(){let s,n;return u("section",{class:"manage-mobile-login"},[u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("header",{class:"login-header"},[u("img",{src:"/assets/logo.png"},null),u("span",null,[r("vite-backen-admin")])]),u("div",{class:"login-form"},[u("div",{class:"row"},[u(c("van-radio-group"),{modelValue:this.language,"onUpdate:modelValue":e=>this.language=e,onChange:()=>this.$emit("tabClick"),direction:"horizontal"},{default:()=>[u(c("van-radio"),{name:"zh-cn"},y(s=e("zh-cn"))?s:{default:()=>[s]}),u(c("van-radio"),{name:"en"},y(n=e("en"))?n:{default:()=>[n]})]})]),u("div",{class:"row",style:"margin-top: 20px;"},[u(c("van-field"),{"left-icon":"user-circle-o",clearable:!0,colon:!0,center:!0,required:!0,modelValue:this.user.username,"onUpdate:modelValue":e=>this.user.username=e,placeholder:e("please.input.something")+e("username"),onClear:()=>this.user.username=""},null)]),u("div",{class:"row"},[u(c("van-field"),{"left-icon":"closed-eye",clearable:!0,colon:!0,center:!0,required:!0,modelValue:this.user.passwords,"onUpdate:modelValue":e=>this.user.passwords=e,type:"password",placeholder:e("please.input.something")+e("password"),onClear:()=>this.user.passwords=""},null)]),u("div",{class:"row"},[u(c("van-field"),{"left-icon":"qr",clearable:!0,colon:!0,center:!0,required:!0,modelValue:this.user.verify,"onUpdate:modelValue":e=>this.user.verify=e,placeholder:e("please.input.something")+e("verify"),onClear:()=>this.user.verify=""},null)]),u("div",{class:"row"},[u(c("van-button"),{color:"linear-gradient(102deg,#50bad1 0%,#00779f 100%),linear-gradient(#00789f,#00789f)",text:e("login"),round:!0,loading:this.logining,"loading-text":"登陆中...",icon:"sign",onTouchstart:()=>this.$emit("login")},null)])])])}});const j=o({name:"Login",componentName:"ManageLogin",components:{pcLogin:v,mobileLogin:w},setup(){const o=p("isMobile"),{proxy:t}=f(),u=t.$store,r=s(),c=d(u.state.lang.language),g=d(!1),b=h({username:"",passwords:"",verify:""});return m((()=>[c.value,r.path]),(()=>{i(e(r.meta.title))})),{tabClick:()=>u.dispatch("setLanguage",c.value),tab:c,userObj:b,userLogin:async()=>{let s="";return n(b.username)?n(b.passwords)?(g.value=!0,await u.dispatch("login",b),g.value=!1,t.$router.push("/"),void t.$nextTick((()=>{setTimeout((()=>{o.value?a({type:"success",message:`${e("login.success")}，${e("welcome")}`}):l({title:e("login.success"),message:`${e("login.success")}，${e("welcome")}`,type:"success"})}),1e3)}))):(s=e("please.input.something")+e("password"),void(o.value?t.$toast.fail(s):t.$message.error(s))):(s=e("please.input.something")+e("username"),void(o.value?t.$toast.fail(s):t.$message.error(s)))},isMobile:o,logining:g}},render(){return this.isMobile?u(c("mobile-login"),b({userObj:this.userObj,tab:this.tab,onTabClick:this.tabClick,onLogin:this.userLogin,logining:this.logining},{"onUpdate:userObj":e=>this.userObj=e,"onUpdate:tab":e=>this.tab=e}),null):u(c("pc-login"),b({userObj:this.userObj,tab:this.tab,onTabClick:this.tabClick,onLogin:this.userLogin,logining:this.logining},{"onUpdate:userObj":e=>this.userObj=e,"onUpdate:tab":e=>this.tab=e}),null)}});export default j;
