import{t as e,a as s,i as a,N as n,_ as t,s as o}from"./index.1addde64.js";import{d as i,c as l,e as r,t as u,f as d,l as c,a as p,i as g,r as m,w as h,z as b,k as f}from"./vendor.b3f3fa7a.js";function y(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!c(e)}const v=["zh-cn","en"],w=[{key:"username",icon:"el-icon-s-custom"},{key:"passwords",icon:"el-icon-lock"},{key:"verify",icon:"el-icon-picture-outline-round"}],j=i({name:"PCLogin",componentName:"ManagePCLogin",props:{tab:String,userObj:{type:Object,default:()=>({})},logining:{type:Boolean,default:!1}},setup:(e,{emit:s})=>({language:l({get:()=>e.tab,set(e){s("update:tab",e)}}),user:l({get:()=>e.userObj,set(e){s("update:userObj",e)}}),keyupToLogin:e=>{e.preventDefault(),e.stopPropagation(),e.code.toLowerCase().includes("enter")&&s("login")}}),render(){let s,a;return r("section",{class:"manage-pc-login"},[r("header",{class:"login-header"},[r("img",{src:"/assets/logo.png"},null),r("span",null,[u("vite-backen-admin")])]),r("div",{class:"login-form"},[new Array(8).fill(r("span",{class:"shinning"},null)),r("div",{class:"row",style:"justify-content: flex-end"},[r(d("el-dropdown"),{trigger:"click",size:"small",onCommand:e=>{this.language=e,this.$emit("tabClick")}},{default:()=>r("i",{class:"iconfont vite-icon-i18n lan-select"},null),dropdown:()=>{let s;return r(d("el-dropdown-menu"),null,y(s=v.map((s=>r(d("el-dropdown-item"),{command:s,key:s},{default:()=>[r("span",{class:{primary:this.language===s},textContent:e(s)},null)]}))))?s:{default:()=>[s]})}})]),w.map((s=>r("div",{class:"row",key:s.key},[r(d("el-input"),{"prefix-icon":s.icon,modelValue:this.user[s.key],"onUpdate:modelValue":e=>this.user[s.key]=e,onKeyup:this.keyupToLogin,placeholder:e("please.input.something")+e(s.key),"show-password":"passwords"===s.key},null)]))),r("div",{class:"row",style:{marginBottom:"-20px",marginTop:"0px",justifyContent:"space-between"}},[r(d("el-checkbox"),{modelValue:this.user.noLogin,"onUpdate:modelValue":e=>this.user.noLogin=e},{default:()=>[u("7天内免登陆")]}),r(d("el-button"),{type:"text",icon:"el-icon-question"},{default:()=>[u("忘记密码")]})]),r("div",{class:"row"},[r(d("el-button"),{loading:this.logining,onClick:()=>this.$emit("login"),class:"special-button"},y(s=e("login"))?s:{default:()=>[s]}),r(d("el-button"),{class:"special-button"},y(a=e("register"))?a:{default:()=>[a]})])])])}});function k(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!c(e)}const O=i({name:"mobileLogin",componentName:"ManageMobileLogin",props:{tab:String,userObj:{type:Object,default:()=>({})},logining:{type:Boolean,default:!1}},setup:(e,{emit:s})=>({language:l({get:()=>e.tab,set(e){s("update:tab",e)}}),user:l({get:()=>e.userObj,set(e){s("update:userObj",e)}}),password:p("password")}),render(){let s,a;return r("section",{class:"manage-mobile-login"},[new Array(8).fill(r("span",{class:"shinning"},null)),r("header",{class:"login-header"},[r("img",{src:"/assets/logo.png"},null),r("span",null,[u("vite-backen-admin")])]),r("div",{class:"login-form"},[r("div",{class:"row"},[r(d("van-radio-group"),{modelValue:this.language,"onUpdate:modelValue":e=>this.language=e,onChange:()=>this.$emit("tabClick"),direction:"horizontal"},{default:()=>[r(d("van-radio"),{name:"zh-cn"},k(s=e("zh-cn"))?s:{default:()=>[s]}),r(d("van-radio"),{name:"en"},k(a=e("en"))?a:{default:()=>[a]})]})]),r("div",{class:"row",style:"margin-top: 20px;"},[r(d("van-field"),{"left-icon":"user-circle-o",clearable:!0,colon:!0,center:!0,required:!0,modelValue:this.user.username,"onUpdate:modelValue":e=>this.user.username=e,placeholder:e("please.input.something")+e("username"),onClear:()=>this.user.username=""},null)]),r("div",{class:"row"},[r(d("van-field"),{clearable:!0,colon:!0,center:!0,required:!0,modelValue:this.user.passwords,"onUpdate:modelValue":e=>this.user.passwords=e,type:this.password,placeholder:e("please.input.something")+e("passwords"),onClear:()=>this.user.passwords=""},{"left-icon":()=>r(d("van-icon"),{name:"password"===this.password?"closed-eye":"eye-o",onTouchstart:e=>{e.stopPropagation(),this.password="password"===this.password?"text":"password"}},null)})]),r("div",{class:"row"},[r(d("van-field"),{"left-icon":"qr",clearable:!0,colon:!0,center:!0,required:!0,modelValue:this.user.verify,"onUpdate:modelValue":e=>this.user.verify=e,placeholder:e("please.input.something")+e("verify"),onClear:()=>this.user.verify=""},null)]),r("div",{class:"row"},[r(d("van-button"),{color:"linear-gradient(102deg,#50bad1 0%,#00779f 100%),linear-gradient(#00789f,#00789f)",text:e("login"),round:!0,loading:this.logining,"loading-text":"登陆中...",icon:"sign",onTouchstart:()=>this.$emit("login")},null)])])])}});const L=i({name:"Login",componentName:"ManageLogin",components:{pcLogin:j,mobileLogin:O},setup(){const i=g("isMobile"),{proxy:l}=f(),r=l.$store,u=s(),d=p(r.state.lang.language),c=p(!1),b=m({username:"vite-manage",passwords:"vite-manage",verify:"",noLogin:!1});return h((()=>[d.value,u.path]),(()=>{o(e(u.meta.title))})),{tabClick:()=>r.dispatch("setLanguage",d.value),tab:d,userObj:b,userLogin:async()=>{let s="";return a(b.username)?a(b.passwords)?(c.value=!0,await r.dispatch("login",b),c.value=!1,l.$router.push("/"),void l.$nextTick((()=>{i.value?n({type:"success",message:`${e("welcome")}, ${b.username}`}):t({title:e("login.success"),message:`${e("welcome")}, ${b.username}`,type:"success"})}))):(s=e("please.input.something")+e("password"),void(i.value?l.$toast.fail(s):l.$message.error(s))):(s=e("please.input.something")+e("username"),void(i.value?l.$toast.fail(s):l.$message.error(s)))},isMobile:i,logining:c}},render(){const e={onTabClick:this.tabClick,onLogin:this.userLogin,logining:this.logining};return this.isMobile?r(d("mobile-login"),b({tab:this.tab,"onUpdate:tab":e=>this.tab=e,userObj:this.userObj,"onUpdate:userObj":e=>this.userObj=e},e),null):r(d("pc-login"),b({tab:this.tab,"onUpdate:tab":e=>this.tab=e,userObj:this.userObj,"onUpdate:userObj":e=>this.userObj=e},e),null)}});export default L;
