import{t as e,i as s,s as n}from"./index.de73546a.js";import{d as a,f as t,c as o,m as i,r as l,i as r,g as u,l as c,k as d,y as p,w as g,v as m,a7 as h,N as b,H as f}from"./vendor.df165e45.js";function y(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!r(e)}const v=["zh-cn","en"],w=[{key:"username",icon:"el-icon-s-custom"},{key:"passwords",icon:"el-icon-lock"},{key:"verify",icon:"el-icon-picture-outline-round"}],j=a({name:"PCLogin",componentName:"ManagePCLogin",props:{tab:String,userObj:{type:Object,default:()=>({})},logining:{type:Boolean,default:!1}},setup:(e,{emit:s})=>({language:t({get:()=>e.tab,set(e){s("update:tab",e)}}),user:t({get:()=>e.userObj,set(e){s("update:userObj",e)}}),keyupToLogin:e=>{e.preventDefault(),e.stopPropagation(),e.code.toLowerCase().includes("enter")&&s("login")}}),render(){let s,n;return o("section",{class:"manage-pc-login"},[o("header",{class:"login-header"},[o("img",{src:"/assets/logo.png"},null),o("span",null,[i("vite-backen-admin")])]),o("div",{class:"login-form"},[new Array(8).fill(o("span",{class:"shinning"},null)),o("div",{class:"row",style:"justify-content: flex-end"},[o(l("el-dropdown"),{trigger:"click",size:"small",onCommand:e=>{this.language=e,this.$emit("tabClick")}},{default:()=>o("i",{class:"iconfont vite-icon-i18n lan-select"},null),dropdown:()=>{let s;return o(l("el-dropdown-menu"),null,y(s=v.map((s=>o(l("el-dropdown-item"),{command:s,key:s},{default:()=>[o("span",{class:{primary:this.language===s},textContent:e(s)},null)]}))))?s:{default:()=>[s]})}})]),w.map((s=>o("div",{class:"row",key:s.key},[o(l("el-input"),{"prefix-icon":s.icon,modelValue:this.user[s.key],"onUpdate:modelValue":e=>this.user[s.key]=e,onKeyup:this.keyupToLogin,placeholder:e("please.input.something")+e(s.key),"show-password":"passwords"===s.key},null)]))),o("div",{class:"row",style:{marginBottom:"-20px",marginTop:"0px",justifyContent:"space-between"}},[o(l("el-checkbox"),{modelValue:this.user.noLogin,"onUpdate:modelValue":e=>this.user.noLogin=e},{default:()=>[i("7天内免登陆")]}),o(l("el-button"),{type:"text",icon:"el-icon-question"},{default:()=>[i("忘记密码")]})]),o("div",{class:"row"},[o(l("el-button"),{loading:this.logining,onClick:()=>this.$emit("login"),class:"special-button"},y(s=e("login"))?s:{default:()=>[s]}),o(l("el-button"),{class:"special-button"},y(n=e("register"))?n:{default:()=>[n]})])])])}});function k(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!r(e)}const O=a({name:"mobileLogin",componentName:"ManageMobileLogin",props:{tab:String,userObj:{type:Object,default:()=>({})},logining:{type:Boolean,default:!1}},setup:(e,{emit:s})=>({language:t({get:()=>e.tab,set(e){s("update:tab",e)}}),user:t({get:()=>e.userObj,set(e){s("update:userObj",e)}}),password:u("password")}),render(){let s,n;return o("section",{class:"manage-mobile-login"},[new Array(8).fill(o("span",{class:"shinning"},null)),o("header",{class:"login-header"},[o("img",{src:"/assets/logo.png"},null),o("span",null,[i("vite-backen-admin")])]),o("div",{class:"login-form"},[o("div",{class:"row"},[o(l("van-radio-group"),{modelValue:this.language,"onUpdate:modelValue":e=>this.language=e,onChange:()=>this.$emit("tabClick"),direction:"horizontal"},{default:()=>[o(l("van-radio"),{name:"zh-cn"},k(s=e("zh-cn"))?s:{default:()=>[s]}),o(l("van-radio"),{name:"en"},k(n=e("en"))?n:{default:()=>[n]})]})]),o("div",{class:"row",style:"margin-top: 20px;"},[o(l("van-field"),{"left-icon":"user-circle-o",clearable:!0,colon:!0,center:!0,required:!0,modelValue:this.user.username,"onUpdate:modelValue":e=>this.user.username=e,placeholder:e("please.input.something")+e("username"),onClear:()=>this.user.username=""},null)]),o("div",{class:"row"},[o(l("van-field"),{clearable:!0,colon:!0,center:!0,required:!0,modelValue:this.user.passwords,"onUpdate:modelValue":e=>this.user.passwords=e,type:this.password,placeholder:e("please.input.something")+e("passwords"),onClear:()=>this.user.passwords=""},{"left-icon":()=>o(l("van-icon"),{name:"password"===this.password?"closed-eye":"eye-o",onTouchstart:e=>{e.stopPropagation(),this.password="password"===this.password?"text":"password"}},null)})]),o("div",{class:"row"},[o(l("van-field"),{"left-icon":"qr",clearable:!0,colon:!0,center:!0,required:!0,modelValue:this.user.verify,"onUpdate:modelValue":e=>this.user.verify=e,placeholder:e("please.input.something")+e("verify"),onClear:()=>this.user.verify=""},null)]),o("div",{class:"row"},[o(l("van-button"),{color:"linear-gradient(102deg,#50bad1 0%,#00779f 100%),linear-gradient(#00789f,#00789f)",text:e("login"),round:!0,loading:this.logining,"loading-text":"登陆中...",icon:"sign",onTouchstart:()=>this.$emit("login")},null)])])])}});const L=a({name:"Login",componentName:"ManageLogin",components:{pcLogin:j,mobileLogin:O},setup(){const a=c("isMobile"),{proxy:t}=h(),o=t.$store,i=d(),l=u(o.state.lang.language),r=u(!1),m=p({username:"vite-manage",passwords:"vite-manage",verify:"",noLogin:!1});return g((()=>[l.value,i.path]),(()=>{n(e(i.meta.title))})),{tabClick:()=>o.dispatch("setLanguage",l.value),tab:l,userObj:m,userLogin:async()=>{let n="";return s(m.username)?s(m.passwords)?(r.value=!0,await o.dispatch("login",m),r.value=!1,t.$router.push("/"),void t.$nextTick((()=>{a.value?b({type:"success",message:`${e("welcome")}, ${m.username}`}):f({title:e("login.success"),message:`${e("welcome")}, ${m.username}`,type:"success"})}))):(n=e("please.input.something")+e("password"),void(a.value?t.$toast.fail(n):t.$message.error(n))):(n=e("please.input.something")+e("username"),void(a.value?t.$toast.fail(n):t.$message.error(n)))},isMobile:a,logining:r}},render(){const e={onTabClick:this.tabClick,onLogin:this.userLogin,logining:this.logining};return this.isMobile?o(l("mobile-login"),m({tab:this.tab,"onUpdate:tab":e=>this.tab=e,userObj:this.userObj,"onUpdate:userObj":e=>this.userObj=e},e),null):o(l("pc-login"),m({tab:this.tab,"onUpdate:tab":e=>this.tab=e,userObj:this.userObj,"onUpdate:userObj":e=>this.userObj=e},e),null)}});export default L;
