import{t as e,u as n,i as s,N as a,_ as l,s as i}from"./index.33922524.js";import{d as o,c as t,b as u,m as r,e as p,k as g,i as c,a as d,r as h,w as m,q as b,j as f}from"./vendor.a1753273.js";const v=o({name:"PCLogin",componentName:"ManagePCLogin",props:{tab:String,userObj:{type:Object,default:()=>({})},logining:{type:Boolean,default:!1}},setup:(e,{emit:n})=>({language:t({get:()=>e.tab,set(e){n("update:tab",e)}}),user:t({get:()=>e.userObj,set(e){n("update:userObj",e)}}),keyupToLogin:e=>{e.preventDefault(),"Enter"===e.code&&n("login")}}),render(){let n;return u("section",{class:"manage-pc-login"},[u("header",{class:"login-header"},[u("img",{src:"/assets/logo.png"},null),u("span",null,[r("vite-backen-admin")])]),u("div",{class:"login-form"},[u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("div",{class:"row"},[u(p("el-tabs"),{modelValue:this.language,"onUpdate:modelValue":e=>this.language=e,onTabClick:()=>this.$emit("tabClick")},{default:()=>[u(p("el-tab-pane"),{label:e("zh-cn"),name:"zh-cn"},null),u(p("el-tab-pane"),{label:e("en"),name:"en"},null)]})]),u("div",{class:"row"},[u(p("el-input"),{"prefix-icon":"el-icon-s-custom",modelValue:this.user.username,"onUpdate:modelValue":e=>this.user.username=e,onKeyup:this.keyupToLogin,placeholder:e("please.input.something")+e("username")},null)]),u("div",{class:"row"},[u(p("el-input"),{"prefix-icon":"el-icon-lock",modelValue:this.user.passwords,"onUpdate:modelValue":e=>this.user.passwords=e,placeholder:e("please.input.something")+e("password"),onKeyup:this.keyupToLogin,"show-password":!0},null)]),u("div",{class:"row"},[u(p("el-input"),{"prefix-icon":"el-icon-picture-outline-round",modelValue:this.user.verify,"onUpdate:modelValue":e=>this.user.verify=e,onKeyup:this.keyupToLogin,placeholder:e("please.input.something")+e("verify")},null)]),u("div",{class:"row"},[u(p("el-button"),{loading:this.logining,onClick:()=>this.$emit("login")},(s=n=e("login"),"function"==typeof s||"[object Object]"===Object.prototype.toString.call(s)&&!g(s)?n:{default:()=>[n]}))])])]);var s}});function y(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!g(e)}const w=o({name:"mobileLogin",componentName:"ManageMobileLogin",props:{tab:String,userObj:{type:Object,default:()=>({})},logining:{type:Boolean,default:!1}},setup:(e,{emit:n})=>({language:t({get:()=>e.tab,set(e){n("update:tab",e)}}),user:t({get:()=>e.userObj,set(e){n("update:userObj",e)}}),keyupToLogin:e=>{e.preventDefault(),"Enter"===e.code&&n("login")}}),render(){let n,s;return u("section",{class:"manage-mobile-login"},[u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("span",{class:"shinning"},null),u("header",{class:"login-header"},[u("img",{src:"/assets/logo.png"},null),u("span",null,[r("vite-backen-admin")])]),u("div",{class:"login-form"},[u("div",{class:"row"},[u(p("van-radio-group"),{modelValue:this.language,"onUpdate:modelValue":e=>this.language=e,onChange:()=>this.$emit("tabClick"),direction:"horizontal"},{default:()=>[u(p("van-radio"),{name:"zh-cn"},y(n=e("zh-cn"))?n:{default:()=>[n]}),u(p("van-radio"),{name:"en"},y(s=e("en"))?s:{default:()=>[s]})]})]),u("div",{class:"row",style:"margin-top: 20px;"},[u(p("van-field"),{"left-icon":"user-circle-o",clearable:!0,colon:!0,center:!0,required:!0,modelValue:this.user.username,"onUpdate:modelValue":e=>this.user.username=e,placeholder:e("please.input.something")+e("username"),onClear:()=>this.user.username="",onKeyup:this.keyupToLogin},null)]),u("div",{class:"row"},[u(p("van-field"),{"left-icon":"closed-eye",clearable:!0,colon:!0,center:!0,required:!0,modelValue:this.user.passwords,"onUpdate:modelValue":e=>this.user.passwords=e,type:"password",placeholder:e("please.input.something")+e("password"),onClear:()=>this.user.passwords="",onKeyup:this.keyupToLogin},null)]),u("div",{class:"row"},[u(p("van-field"),{"left-icon":"qr",clearable:!0,colon:!0,center:!0,required:!0,modelValue:this.user.verify,"onUpdate:modelValue":e=>this.user.verify=e,placeholder:e("please.input.something")+e("verify"),onClear:()=>this.user.verify="",onKeyup:this.keyupToLogin},null)]),u("div",{class:"row"},[u(p("van-button"),{color:"linear-gradient(102deg,#50bad1 0%,#00779f 100%),linear-gradient(#00789f,#00789f)",text:e("login"),round:!0,loading:this.logining,"loading-text":"登陆中...",icon:"sign",onClick:()=>this.$emit("login")},null)])])])}});const j=o({name:"Login",componentName:"ManageLogin",components:{pcLogin:v,mobileLogin:w},setup(){const o=c("isMobile"),{proxy:t}=f(),u=t.$store,r=n(),p=d(u.state.lang.language),g=d(!1),b=h({username:"",passwords:"",verify:""});return m((()=>[p.value,r.path]),(()=>{i(e(r.meta.title))})),{tabClick:()=>u.dispatch("setLanguage",p.value),tab:p,userObj:b,userLogin:async()=>{let n="";return s(b.username)?s(b.passwords)?(g.value=!0,await u.dispatch("login",b),g.value=!1,t.$router.push("/"),void t.$nextTick((()=>{setTimeout((()=>{o.value?a({type:"success",message:`${e("login.success")}，${e("welcome")}`}):l({title:e("login.success"),message:`${e("login.success")}，${e("welcome")}`,type:"success"})}),1e3)}))):(n=e("please.input.something")+e("password"),void(o.value?t.$toast.fail(n):t.$message.error(n))):(n=e("please.input.something")+e("username"),void(o.value?t.$toast.fail(n):t.$message.error(n)))},isMobile:o,logining:g}},render(){return this.isMobile?u(p("mobile-login"),b({userObj:this.userObj,tab:this.tab,onTabClick:this.tabClick,onLogin:this.userLogin,logining:this.logining},{"onUpdate:userObj":e=>this.userObj=e,"onUpdate:tab":e=>this.tab=e}),null):u(p("pc-login"),b({userObj:this.userObj,tab:this.tab,onTabClick:this.tabClick,onLogin:this.userLogin,logining:this.logining},{"onUpdate:userObj":e=>this.userObj=e,"onUpdate:tab":e=>this.tab=e}),null)}});export default j;
